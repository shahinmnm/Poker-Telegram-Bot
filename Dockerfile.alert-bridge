FROM python:3.11-slim

ENV PYTHONDONTWRITEBYTECODE=1 \
    PYTHONUNBUFFERED=1

WORKDIR /app

RUN apt-get update \
    && apt-get install --no-install-recommends -y ca-certificates curl \
    && rm -rf /var/lib/apt/lists/*

RUN pip install --no-cache-dir \
    aiohttp==3.9.5 \
    python-telegram-bot==20.8 \
    prometheus-client==0.20.0

COPY pokerapp /app/pokerapp
COPY scripts /app/scripts

EXPOSE 9099

CMD ["python", "-m", "pokerapp.alert_bridge"]
